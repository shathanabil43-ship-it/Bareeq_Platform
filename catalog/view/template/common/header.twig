<!DOCTYPE html>
<html dir="{{ direction }}" lang="{{ lang }}">  {# تحديد اتجاه النص (rtl/ltr) ولغة الصفحة مثل ar أو en #}
<head>
  <meta charset="UTF-8"/>  {# ترميز النصوص ليظهر العربي والرموز بشكل صحيح #}
  <meta name="viewport" content="width=device-width, initial-scale=1">  {# لتجعل التصميم متجاوب مع شاشات الجوال #}
  <title>{{ title }}</title>  {# عنوان الصفحة في شريط المتصفح #}
  <base href="{{ base }}"/>  {# لتحديد المسار الأساسي للروابط النسبية في الموقع #}

  {% if description %}  
    <meta name="description" content="{{ description }}"/>  {# وصف الصفحة لمحركات البحث (SEO) #}
  {% endif %}
  {% if keywords %}
    <meta name="keywords" content="{{ keywords }}"/>  {# الكلمات المفتاحية لمحركات البحث #}
  {% endif %}

  <link href="{{ stylesheet }}" type="text/css" rel="stylesheet"/>  {# تحميل ملف CSS الأساسي للقالب #}
  <script src="{{ jquery }}" type="text/javascript"></script>  {# تحميل مكتبة jQuery #}
  <script src="catalog/view/javascript/common.js" type="text/javascript"></script>  {# تحميل سكربت عام للموقع #}

  {% if icon %}
    <link rel="icon" href="{{ icon }}" type="image/png">  {# أيقونة الموقع (favicon) تظهر في تبويب المتصفح #}
  {% endif %}

  {# تحميل ملفات CSS إضافية #}
  {% for style in styles %}
    <link href="{{ style.href }}" type="text/css" rel="{{ style.rel }}" media="{{ style.media }}"/>
  {% endfor %}

  {# تحميل ملفات JavaScript إضافية #}
  {% for script in scripts %}
    <script src="{{ script.href }}" type="text/javascript"></script>
  {% endfor %}

  {# روابط إضافية مثل RSS أو canonical links #}
  {% for link in links %}
    <link href="{{ link.href }}" rel="{{ link.rel }}"/>
  {% endfor %}

  {# أكواد تحليلات مثل Google Analytics #}
  {% for analytic in analytics %}
    {{ analytic }}
  {% endfor %}
</head>

<body class="w-100 h-100">  {# ضبط عرض وارتفاع الصفحة بالكامل #}
  <div id="container" class="d-flex flex-column min-vh-100">  {# استخدام flex لجعل الصفحة تمتد بطول الشاشة #}

    <div id="alert"></div>  {# مكان لعرض رسائل التنبيه (errors/success) ديناميكيًا #}

        <!-- شريط علوي قديم (مخفي في هذا التصميم) -->
    <nav id="top" class="d-none">
      <div class="container">
        <div class="row">
          <div class="col-4">
            <ul class="list-inline">
              <li class="list-inline-item me-3">{{ currency }}</li>
              <li class="list-inline-item me-3">{{ language }}</li>
            </ul>
          </div>
          <div class="col text-end">
            <ul class="list-inline">
              <li class="list-inline-item">
                <a href="{{ contact }}">
                  <i class="fa-solid fa-phone"></i>
                  <span class="d-none d-lg-inline">{{ telephone }}</span>
                </a>
              </li>
              <li class="list-inline-item">
                <div class="dropdown">
                  <a href="#" class="dropdown-toggle" data-bs-toggle="dropdown">
                    <i class="fa-solid fa-user"></i>
                    <span class="d-none d-lg-inline">{{ text_account }}</span>
                    <i class="fa-solid fa-caret-down"></i>
                  </a>
                  <ul class="dropdown-menu dropdown-menu-end">
                    {% if not logged %}
                      <li><a href="{{ register }}" class="dropdown-item">{{ text_register }}</a></li>
                      <li><a href="{{ login }}" class="dropdown-item">{{ text_login }}</a></li>
                    {% else %}
                      <li><a href="{{ account }}" class="dropdown-item">{{ text_account }}</a></li>
                      <li><a href="{{ order }}" class="dropdown-item">{{ text_order }}</a></li>
                      <li><a href="{{ transaction }}" class="dropdown-item">{{ text_transaction }}</a></li>
                      <li><a href="{{ download }}" class="dropdown-item">{{ text_download }}</a></li>
                      <li><a href="{{ logout }}" class="dropdown-item">{{ text_logout }}</a></li>
                    {% endif %}
                  </ul>
                </div>
              </li>
              <li class="list-inline-item">
                <a href="{{ wishlist }}" id="wishlist-total" title="{{ text_wishlist }}">
                  <i class="fa-solid fa-heart"></i>
                  <span class="d-none d-lg-inline">{{ text_wishlist }}</span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="{{ shopping_cart }}" title="{{ text_shopping_cart }}">
                  <i class="fa-solid fa-cart-shopping"></i>
                  <span class="d-none d-lg-inline">{{ text_shopping_cart }}</span>
                </a>
              </li>
              <li class="list-inline-item">
                <a href="{{ checkout }}" title="{{ text_checkout }}">
                  <i class="fa-solid fa-share"></i>
                  <span class="d-none d-lg-inline">{{ text_checkout }}</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </nav>


        <!-- الهيدر الرئيسي بتصميم بريق -->
    <header id="header-main" class="border-bottom">
      <div class="container">
        <div class="d-flex align-items-center justify-content-between gap-4 py-3">

          {# ❶ اللوجو + اسم الموقع (يمين) #}
          <div class="header-brand d-flex align-items-center">
            {% if logo %}
              <a href="{{ home }}" class="d-flex align-items-center text-decoration-none">
                <div class="header-logo-wrapper">
                  <img src="{{ logo }}" title="{{ name }}" alt="{{ name }}" class="img-fluid"/>
                </div>
                <div class="ms-2 d-none d-md-flex flex-column text-end">
                  <span class="header-brand-title">{{ name }}</span>
                  {# سطر الوصف تحت الاسم - تكتبي النص اللي تحبيه في الـ SCSS أو هنا مباشرة #}
                  <span class="header-brand-subtitle">في الواقع والخيال</span>
                </div>
              </a>
            {% else %}
              <h1 class="m-0">
                <a href="{{ home }}" class="text-decoration-none header-brand-title">{{ name }}</a>
              </h1>
            {% endif %}
          </div>

          {# ❷ القائمة الرئيسية في المنتصف (الرئيسية، المنتجات، المميزات، من نحن، اتصل بنا) #}
<nav class="header-nav flex-grow-1 d-none d-md-flex justify-content-center">
  <ul class="header-menu list-unstyled d-flex align-items-center gap-4 m-0">
    <li class="header-menu-item">
      <a href="{{ home }}" class="header-menu-link text-decoration-none">
        {{ text_home }}
      </a>
    </li>

    <li class="header-menu-item">
      <a href="{{ home }}#content_bottom" class="header-menu-link text-decoration-none">
        {{ text_products }}
      </a>
    </li>

    <li class="header-menu-item">
      <a href="{{ home }}#features" class="header-menu-link text-decoration-none">
        {{ text_features }}
      </a>
    </li>

    <li class="header-menu-item">
      <a href="{{ home }}#about" class="header-menu-link text-decoration-none">
        {{ text_about }}
      </a>
    </li>

    <li class="header-menu-item">
      <a href="{{ contact }}" class="header-menu-link text-decoration-none">
        {{ text_contact }}
      </a>
    </li>
  </ul>
</nav>


          {# ❸ أيقونات الإجراءات (يسار): السلة - الحساب - البحث #}
          <div class="header-actions d-flex align-items-center gap-3">

            {# أيقونة السلة مع بادج #}
            <a href="{{ shopping_cart }}" class="header-icon position-relative" title="{{ text_shopping_cart }}">
              <i class="fa-solid fa-cart-shopping"></i>
              <span class="header-cart-badge">
                {{ cart_total|default('') }}
              </span>
            </a>

            {# أيقونة الأمنيات #}
            <a href="{{ wishlist }}"
                  class="header-icon position-relative"
                  title="{{ text_wishlist }}">
              <i class="fa-regular fa-heart"></i>

            {# (اختياري) عدد الأمنيات إن كان متوفر #}
               {% if wishlist_total is defined and wishlist_total %}
              <span class="header-cart-badge">
                  {{ wishlist_total }}
                </span>
              {% endif %}
            </a>

            {# أيقونة الحساب: لو مسجّل يذهب للحساب، غير مسجل يذهب لتسجيل الدخول #}
            {% if logged %}
              <a href="{{ account }}" class="header-icon" title="{{ text_account }}">
                <i class="fa-regular fa-user"></i>
              </a>
            {% else %}
              <a href="{{ login }}" class="header-icon" title="{{ text_login }}">
                <i class="fa-regular fa-user"></i>
              </a>
            {% endif %}

            {# أيقونة البحث - حالياً تفتح صفحة البحث العادية، ممكن لاحقاً نخليها تفتح حقل منسدل #}
            <a href="{{ search_action|default('index.php?route=product/search&language=en-gb') }}" class="header-icon" title="{{ text_search|default('بحث') }}">
              <i class="fa-solid fa-magnifying-glass"></i>
            </a>

          </div>
        </div>
      </div>
    </header>

    {# المحتوى الرئيسي - نخلي المين كما هو لكن بدون المنيو لأننا وضعناه في الهيدر #}
    <main class="flex-grow-1 mb-4">
      {# هنا يبدأ محتوى الصفحات الأخرى الذي يأتي بعد الهيدر #}
